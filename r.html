<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Redirecionando...</title>
  <script>
    async function redirecionar() {
      const urlParams = new URLSearchParams(window.location.search);
      const ref = urlParams.get("ref");
      if (!ref) return document.body.innerHTML = "<h2>Apelido não informado.</h2>";

      const resposta = await fetch("URL_DO_SEU_SCRIPT?apelido=" + ref);
      const dados = await resposta.json();
      if (dados.codigo) {
        const destino = "https://tamandarett.github.io/pix-pagina/pix.html?codigo=" + encodeURIComponent(dados.codigo);
        window.location.href = destino;
      } else {
        document.body.innerHTML = "<h2>Link não encontrado ou expirado.</h2>";
      }
    }
    redirecionar();
  </script>
</head>
<body>
  <p>Redirecionando...</p>
</body>
</html>
